# This is a basic workflow to help you get started with Actions

name: Deploy to ISODME

# Controls when the action will run. 
on:
  # Triggers the workflow on push or pull request events but only for the main branch
  push:
    branches: 
    - main
  pull_request:
    branches:
      - main

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  deploy:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v2

      - name: Setup authentication
        run: |
          echo -e "-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAArAAAABNlY2RzYS\n1zaGEyLW5pc3RwNTIxAAAACG5pc3RwNTIxAAAAhQQBo52EC5hW8KesJbUcznqwOHH/pNJM\nz+G7RT8I+zOYoTKQS13bEj9I+ZRPEgc8bwqDS6RMe3PYPM9zaYevczcP7iAAk/v7idKt1q\nTyuQKpbQsJbB/pyboQT0rfcZ1wL5Hdt6fkxeyNbc9rFkQAM9FdUpraQVOG234Yv0hyLPw4\no8hHs78AAAEQbUIWIW1CFiEAAAATZWNkc2Etc2hhMi1uaXN0cDUyMQAAAAhuaXN0cDUyMQ\nAAAIUEAaOdhAuYVvCnrCW1HM56sDhx/6TSTM/hu0U/CPszmKEykEtd2xI/SPmUTxIHPG8K\ng0ukTHtz2DzPc2mHr3M3D+4gAJP7+4nSrdak8rkCqW0LCWwf6cm6EE9K33GdcC+R3ben5M\nXsjW3PaxZEADPRXVKa2kFThtt+GL9Iciz8OKPIR7O/AAAAQgHCReBf/1jFnKtfLZxCzSZQ\nKgRnrY5JCLJcyFilxILUzJ8dm/hD7NAzasB7e8mf1urQc3kFzqFtQEu5Lg21YpVNmAAAAA\nxuZXdvQERlc2t0b3ABAgMEBQY=\n-----END OPENSSH PRIVATE KEY-----" >> .ssh/id_ecdsa
          echo "ecdsa-sha2-nistp521 AAAAE2VjZHNhLXNoYTItbmlzdHA1MjEAAAAIbmlzdHA1MjEAAACFBAGjnYQLmFbwp6wltRzOerA4cf+k0kzP4btFPwj7M5ihMpBLXdsSP0j5lE8SBzxvCoNLpEx7c9g8z3Nph69zNw/uIACT+/uJ0q3WpPK5AqltCwlsH+nJuhBPSt9xnXAvkd23p+TF7I1tz2sWRAAz0V1SmtpBU4bbfhi/SHIs/DijyEezvw== newo@Desktop" > id_ecdsa.pub
          chmod 600 .ssh/id_ecdsa
          chmod 644 .ssh/id_ecdsa.pub

      - name: Send files
        run: rsync -a --delete . hackco@68.162.241.27:~/domains/new.hack3.co/public_html
